{% extends "layouts/base.html" %}

{% block title %} UI Tables {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
    <style>
        .form-control {
            margin-bottom: 10px;
        }
    </style>
{% endblock stylesheets %}

{% block content %}

<div class="row">
    <!-- Kūriniai Table -->
    <div class="col-md-6">
        <div class="card">
            <div class="card-header card-header-info">
                <h4 class="card-title">Kūrinių sąrašas</h4>
            </div>
            <div class="card-body">
                <table class="table" id="kuriniai-table">
                    <thead>
                    <tr>
                        <th class="text-center">#</th>
                        <th>Pavadinimas</th>
                        <th>Tipas</th>
                        <th>Trukmė</th>
                        <th class="text-right">Actions</th>
                    </tr>
                    </thead>
                    <tbody id="table-body">
                        <tr>
                            <td class="text-center">1</td>
                            <td>Dzūkų daina</td>
                            <td>Daina</td>
                            <td>3:45</td>
                            <td class="td-actions text-right">
                                <button type="button" class="btn btn-success">
                                    <i class="material-icons">edit</i>
                                </button>
                                <button type="button" class="btn btn-danger" onclick="deleteRow(this)">
                                    <i class="material-icons">close</i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">2</td>
                            <td>Suvalkų šokis</td>
                            <td>Šokis</td>
                            <td>2:30</td>
                            <td class="td-actions text-right">
                                <button type="button" class="btn btn-success">
                                    <i class="material-icons">edit</i>
                                </button>
                                <button type="button" class="btn btn-danger" onclick="deleteRow(this)">
                                    <i class="material-icons">close</i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">3</td>
                            <td>Kapelos melodija</td>
                            <td>Kapela</td>
                            <td>4:00</td>
                            <td class="td-actions text-right">
                                <button type="button" class="btn btn-success">
                                    <i class="material-icons">edit</i>
                                </button>
                                <button type="button" class="btn btn-danger" onclick="deleteRow(this)">
                                    <i class="material-icons">close</i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Form to Add a New Kūrinys -->
    <div class="col-md-6">
        <div class="card">
            <div class="card-header card-header-danger">
                <h4 class="card-title">Pridėti naują kūrinį</h4>
                <p class="category">Įveskite informaciją apie kūrinį</p>
            </div>
            <div class="card-body">
                <form id="add-form">
                    <div class="form-group">
                        <label>Pavadinimas</label>
                        <input type="text" id="pavadinimas" class="form-control" required placeholder="Kūrinio pavadinimas">
                    </div>

                    <div class="form-group">
                        <label>Tipas</label>
                        <label for="tipas"></label><select id="tipas" class="form-control" required>
                            <option value="Šokis">Šokis</option>
                            <option value="Kapela">Kapela</option>
                            <option value="Daina">Daina</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Trukmė</label>
                        <input type="text" id="trukme" class="form-control" required placeholder="00:00">
                    </div>

                    <button type="button" class="btn btn-danger" onclick="addKurinys()">Pridėti kūrinį</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
    <script>
        function addKurinys() {
            let table = document.getElementById("table-body");
            let rowCount = table.rows.length + 1;

            let pavadinimas = document.getElementById("pavadinimas").value;
            let tipas = document.getElementById("tipas").value;
            let trukme = document.getElementById("trukme").value;

            if (pavadinimas.trim() === "" || trukme.trim() === "") {
                alert("Prašome užpildyti visus laukelius!");
                return;
            }

            let row = `<tr>
                            <td class="text-center">${rowCount}</td>
                            <td>${pavadinimas}</td>
                            <td>${tipas}</td>
                            <td>${trukme}</td>
                            <td class="td-actions text-right">
                                <button type="button" class="btn btn-success">
                                    <i class="material-icons">edit</i>
                                </button>
                                <button type="button" class="btn btn-danger" onclick="deleteRow(this)">
                                    <i class="material-icons">close</i>
                                </button>
                            </td>
                        </tr>`;

            table.innerHTML += row;

            // Clear input fields after adding
            document.getElementById("pavadinimas").value = "";
            document.getElementById("trukme").value = "";
        }

        function deleteRow(btn) {
            let row = btn.closest("tr");
            row.remove();
        }
    </script>
{% endblock javascripts %}
